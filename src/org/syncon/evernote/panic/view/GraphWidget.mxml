<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
						  xmlns:s="library://ns.adobe.com/flex/spark" 
						  xmlns:mx="library://ns.adobe.com/flex/mx"  
						   implements="org.syncon.evernote.panic.view.IUIWidget"
						   creationComplete="onInit()" resize="group1_resizeHandler(event)"
						   fontSize="24" clipAndEnableScrolling="true"
						   color="0xFFFFFF" xmlns:view="org.syncon.evernote.panic.view.*"
						 >

	<fx:Metadata>
		[Event(name="tagsChanged", type="org.syncon.evernote.basic.model.CustomEvent")]
	</fx:Metadata>		
	
	<fx:Script>
		<![CDATA[
			import mx.events.ResizeEvent;
			
			import org.syncon.evernote.basic.model.CustomEvent;
			import org.syncon.evernote.panic.controller.WidgetEvent;
			import org.syncon.evernote.panic.vo.WidgetVO;
			static public var TAGS_CHANGED : String = 'tagsChanged'				
				
			/**
			 * Flag indiates whether tags should be removed instantly 
			 * */
			public var creationComplete : Boolean = false; 
			public var _widgetData : WidgetVO = new WidgetVO
				
			public var labelBottom : String = ''; 
			public var labelTop : String = ''; 
			public var maximum : Number = NaN; 	
			
			
			public function set  widgetData ( w : WidgetVO )  : void { this._widgetData = w }
			public function get   widgetData (  )  : WidgetVO { return this._widgetData; }
			import mx.collections.ArrayCollection;
			[Bindable]
/* 			public var expenses:ArrayCollection = new ArrayCollection([
				{Month:"Jan", Profit:2000, Expenses:1500},
				{Month:"Feb", Profit:1000, Expenses:200},
				{Month:"Mar", Profit:1500, Expenses:500}
			]);
			 */
			public var expenses:ArrayCollection = new ArrayCollection([
				{Month:"Jan", Expenses:1500},
			]);
			
			protected function onInit():void
			{
				 this.creationComplete = true
			//	this.importConfig( this._widgetData );
				 group1_resizeHandler(null)
			}				
				
			
			override public function set  width ( w : Number )  : void
			{
				super.width = w; 
				//this.height = w*(115/99) 
				this.height = 300
				this.chart.height = this.height - 100
				this.chart.width = w*1.5
			}
			
			protected function group1_resizeHandler(event:ResizeEvent):void
			{
				if ( this.percentWidth != 0 &&  isNaN( this.percentWidth ) == false ) 
				{
					
					var w : Number = this.parentDocument.width*this.percentWidth/100//*(115/99)
					//if ( this.data.vo.height == NaN ) 
					
					///this.width = w; 
					this.height = 300
					this.chart.height = this.height - 100
					/*this.chart.width = w*1.5				 */	
					
				}
			}			
			
			public function set textTop( s : String )  : void
			{
				this.lblTop.text = s.toUpperCase()
			}			
			
			public function set textBottom( s : String )  : void
			{
				this.lblBottom.text = s.toUpperCase()
			}
			
			public function set fillC( s : uint )  : void
			{
				this.fillColor.color = s; 
			}
			
						/**
						 * how tomake sure changes are propgated to vo? 
						 * when ou change them ... call a update vo function 
						 * make in interface, desigend to take props from component and 
						 * copy back to vo the intervew of import config ... 
						 * oh we alreay hae that it's called export great. 
						 * */
 			public function importConfig(j :  WidgetVO )  : void
			{
				if ( j.data == null ) 
					return;
				this.widgetData = j
				this.widgetData.ui = this; 
				this.fillC = uint( j.data.fillColor ) 
				this.labelBottom = j.data.labelBottom; 
				this.labelTop = j.data.labelTop; 
				this.maximum = j.data.max
				
				this.dispatchEvent( new WidgetEvent(WidgetEvent.IMPORT_CONFIG,  j ) )
			}
						
			public function importData_( o:   Object )  : void
			{
			}		
			static public function importData( name : String, desc:String, labelTop : String, 
			labelBottom : String, value :  Object, max : Number=NaN, fillColor : String='', 
			 refreshTime :  Number=15000)  :  GraphWidget
			{
				var o : Object = {}
				var vo : WidgetVO = new WidgetVO(WidgetVO.GRAPH, o); 	
				var g : GraphWidget = new GraphWidget()
				g.widgetData = vo
				vo.ui = g;
				
				vo.name = name; 
				vo.description = desc
				//vo.source = source; 
				vo.refreshTime = refreshTime; 
				
				o.fillColor = fillColor
				o.labelTop = labelTop
				o.labelBottom = labelBottom
				o.max = max; 
				//a string .. that is scrted to anumber later
				o.value = value; 
				return g ; 
			}			
			public function exportConfig( ) : WidgetVO    
			{
				_widgetData.data.fillColor = this.fillColor.color; 
				_widgetData.data.labelTop = labelTop
				_widgetData.data.labelBottom = labelBottom
				_widgetData.data.max = this.maximum; 
								
				return this._widgetData; 
			}			
			
			
			public function showEdit() : void
			{
				this.editBorder.show()
			}
			
			public function hideEdit()  : void
			{
				this.editBorder.hide()
			}						
		]]>
	</fx:Script>

	<fx:Style>
		.myAxisStyle {
			placement:bottom;
			minorTickPlacement:none;
			tickLength:12;
			tickPlacement:none;
		}
		.myStyle {
			direction:"none";
			horizontalShowOrigin:true;
			horizontalTickAligned:false;
			horizontalChangeCount:0; 
			verticalShowOrigin:false;
			verticalTickAligned:false; 
			verticalChangeCount:0;
			horizontalFill:#990033;
			horizontalAlternateFill:#00CCFF;      
		}  		
	</fx:Style>
	
	<fx:Declarations>
		<s:SolidColor id="fillColor" color="0xFFDDFF" />
	</fx:Declarations>
	


	
	<s:VGroup  horizontalAlign="center" clipAndEnableScrolling="false"  width="100%">
		
	
	 
	<s:Label text="89/3" fontSize="36" id="lblTop" />
	<mx:BarChart height="80"  width="180%"   id="chart"
				  dataProvider="{expenses}"  >
		<mx:backgroundElements>
		</mx:backgroundElements>
		
		<mx:horizontalAxisRenderers>
			<mx:AxisRenderer  
				axis="{a1}" styleName="myAxisStyle" showLabels="false"
				showLine="false"/>
		</mx:horizontalAxisRenderers>
		<mx:verticalAxisRenderers>
			<mx:AxisRenderer  
				axis="{a1}" styleName="myAxisStyle" showLabels="false"
				showLine="false"
				/>
		</mx:verticalAxisRenderers>		
		
		<mx:horizontalAxis>
			<mx:CategoryAxis  id="a1" 
				dataProvider="{expenses}" 
				categoryField="Month"
				/>
		</mx:horizontalAxis>
		<mx:verticalAxis>
			<mx:LinearAxis  id="a2" 
							 
							   baseAtZero="true"
							  />
		</mx:verticalAxis>		
		<mx:series>
			<mx:ColumnSeries 
				xField="Month"  
				yField="Expenses" 
				displayName="Expenses" fill="{this.fillColor}"
				/>
		</mx:series>

	</mx:BarChart>
<!--	<mx:LineChart height="80%"  width="100%" 
				  dataProvider="{expenses}"  >
			<mx:backgroundElements>
					<mx:GridLines styleName="myStyle">
						<mx:horizontalStroke>
							<mx:SolidColorStroke weight="3"/>
						</mx:horizontalStroke>
						<mx:verticalStroke>
							<mx:SolidColorStroke weight="3"/>
						</mx:verticalStroke>
					</mx:GridLines>
			</mx:backgroundElements>
			<mx:horizontalAxis>
				<mx:CategoryAxis 
					id="a1"   
					dataProvider="{expenses}" 
					categoryField="Month"
					/>
			</mx:horizontalAxis>
			<mx:horizontalAxisRenderers>
				<mx:AxisRenderer 
					axis="{a1}" styleName="myAxisStyle"
					showLine="false"/>
			</mx:horizontalAxisRenderers>
			<mx:verticalAxisRenderers>
				<mx:AxisRenderer 
					axis="{a1}" styleName="myAxisStyle"
					showLine="false"
					/>
			</mx:verticalAxisRenderers>
			<mx:series>
				<mx:LineSeries 
					yField="Profit" 
					displayName="Profit"
					/>
				 
			</mx:series>
		</mx:LineChart>-->

	<s:Label  id="lblBottom" text="Transcode"  />
	</s:VGroup>
	
	
	<view:EditBorder id="editBorder" edit="{this}" />
</s:Group>
